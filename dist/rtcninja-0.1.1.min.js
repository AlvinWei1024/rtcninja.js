/*
 * rtcninja.js v0.1.1
 * WebRTC API wrapper to deal with different browsers
 * Copyright 2014-2015 IÃ±aki Baz Castillo <ibc@aliax.net>
 * License ISC
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.rtcninja=e()}}(function(){var e;return function n(e,t,i){function o(a,s){if(!t[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var l=t[a]={exports:{}};e[a][0].call(l.exports,function(n){var t=e[a][1][n];return o(t?t:n)},l,l.exports,n,e,t,i)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,n){(function(t){function i(e){return function(){throw new Error("rtcninja: WebRTC not supported, missing "+e+" [browser: "+r.name+" "+r.version+"]")}}var o=n.exports={},r=e("bowser").browser,a=e("debug")("rtcninja:Adapter"),s=e("./TemasysPlugin"),c=null,d=null,l=null,u=null,p=null,f=null,m=Number(r.version)||0,g=!(r.mobile&&r.tablet);a("detected browser: %s %s [mobile:%s, tablet:%s, android:%s, ios:%s]",r.name,r.version,!!r.mobile,!!r.tablet,!!r.android,!!r.ios),g&&r.chrome&&m>=32||r.android&&r.chrome&&m>=39||g&&r.opera&&m>=27||r.android&&r.opera&&m>=24||r.android&&r.webkit&&!r.chrome&&m>=37||navigator.webkitGetUserMedia&&t.webkitRTCPeerConnection?(c=navigator.webkitGetUserMedia.bind(navigator),d=t.webkitRTCPeerConnection,l=t.RTCSessionDescription,u=t.RTCIceCandidate,p=t.MediaStreamTrack,f=function(e,n){return e.src=URL.createObjectURL(n),e}):g&&r.firefox&&m>=22||r.android&&r.firefox&&m>=33||navigator.mozGetUserMedia&&t.mozRTCPeerConnection?(c=navigator.mozGetUserMedia.bind(navigator),d=t.mozRTCPeerConnection,l=t.mozRTCSessionDescription,u=t.mozRTCIceCandidate,p=t.MediaStreamTrack,f=function(e,n){return e.src=URL.createObjectURL(n),e}):navigator.getUserMedia&&t.RTCPeerConnection?(c=navigator.getUserMedia.bind(navigator),d=t.RTCPeerConnection,l=t.RTCSessionDescription,u=t.RTCIceCandidate,p=t.MediaStreamTrack,f=function(e,n){return e.src=URL.createObjectURL(n),e}):(r.msie||r.safari)&&s()&&(c=s.getUserMedia,d=s.RTCPeerConnection,l=s.RTCSessionDescription,u=s.RTCIceCandidate,p=s.MediaStreamTrack,f=s.attachMediaStream),o.browser=r,o.hasWebRTC=!!(c&&d&&l&&u),o.getUserMedia=c?function(e,n,t){a("getUserMedia() | constraints:",e);try{c(e,function(e){a("getUserMedia() | success"),n&&n(e)},function(e){a("getUserMedia() | error:",e),t&&t(e)})}catch(i){a("getUserMedia() | error:",i),t&&t(i)}}:i("getUserMedia"),o.RTCPeerConnection=d||i("RTCPeerConnection"),o.RTCSessionDescription=l||i("RTCSessionDescription"),o.RTCIceCandidate=u||i("RTCIceCandidate"),o.MediaStreamTrack=p||i("MediaStreamTrack"),o.attachMediaStream=f||i("attachMediaStream"),o.closeMediaStream=function(e){if(e){var n=t.MediaStreamTrack;if(n&&n.prototype&&n.prototype.stop){a("closeMediaStream() | calling stop() on all the MediaStreamTrack");var i,o,r;if(n.prototype.getTracks)for(i=e.getTracks(),o=0,r=i.length;r>o;o++)i[o].stop();else{for(i=e.getAudioTracks(),o=0,r=i.length;r>o;o++)i[o].stop();for(i=e.getVideoTracks(),o=0,r=i.length;r>o;o++)i[o].stop()}}else"function"==typeof e.stop&&(a("closeMediaStream() | calling stop() on the MediaStream"),e.stop())}},o.fixPeerConnectionConfig=function(e){Array.isArray(e.iceServers)||(e.iceServers=[]);for(var n=0,t=e.iceServers.length;t>n;n++){var i=e.iceServers[n],o=i.hasOwnProperty("urls"),r=i.hasOwnProperty("url");"object"==typeof i&&(o&&!r?i.url=Array.isArray(i.urls)?i.urls[0]:i.urls:!o&&r&&(i.urls=Array.isArray(i.url)?i.url.slice():i.url),r&&Array.isArray(i.url)&&(i.url=i.url[0]))}},a(o.hasWebRTC?"WebRTC supported":"WebRTC not supported")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./TemasysPlugin":3,bowser:6,debug:7}],2:[function(e,n){function t(e,n){c("new | original configuration:",e),i.call(this,e),c("new | processed configuration:",this.configuration),this.pc=new l.RTCPeerConnection(this.configuration,n),this._localDescription=null,this._signalingState=null,this._iceConnectionState=null,this._iceGatheringState=null,this.timerGatheringTimeoutAfterRelay=null,this.ignoreIceGathering=!1,this.closed=!1,o.call(this),r.call(this)}function i(e){this.configuration=s(!0,e),l.fixPeerConnectionConfig(this.configuration),this.options={iceTransportsRelay:"relay"===this.configuration.iceTransports,iceTransportsNone:"none"===this.configuration.iceTransports,gatheringTimeoutAfterRelay:this.configuration.gatheringTimeoutAfterRelay},delete this.configuration.gatheringTimeoutAfterRelay}function o(){var e=this,n=this.pc;Object.defineProperties(this,{peerConnection:{get:function(){return n}},signalingState:{get:function(){return n.signalingState}},iceConnectionState:{get:function(){return n.iceConnectionState}},iceGatheringState:{get:function(){return n.iceGatheringState}},localDescription:{get:function(){return a.call(e)}},remoteDescription:{get:function(){return n.remoteDescription}},peerIdentity:{get:function(){return n.peerIdentity}}})}function r(){var e=this,n=this.pc;n.onnegotiationneeded=function(n){e.closed||(c("onnegotiationneeded()"),e.onnegotiationneeded&&e.onnegotiationneeded(n))},n.onicecandidate=function(n){if(!e.closed&&!e.ignoreIceGathering&&!e.options.iceTransportsNone){var t=n.candidate;if(t){var i=u.REGEXP_RELAY_CANDIDATE.test(t.candidate);if(e.options.iceTransportsRelay&&!i)return;i&&!e.timerGatheringTimeoutAfterRelay&&"number"==typeof e.options.gatheringTimeoutAfterRelay&&(c("onicecandidate() | first relay candidate found, ending gathering in %d ms",e.options.gatheringTimeoutAfterRelay),e.timerGatheringTimeoutAfterRelay=setTimeout(function(){e.closed||(c("forced end of candidates after timeout"),delete e.timerGatheringTimeoutAfterRelay,e.ignoreIceGathering=!0,e.onicecandidate&&e.onicecandidate(n,null))},e.options.gatheringTimeoutAfterRelay));var o=new l.RTCIceCandidate({sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex,candidate:t.candidate});null===p.normalizeCandidate&&(u.REGEXP_NORMALIZED_CANDIDATE.test(t.candidate)?p.normalizeCandidate=!1:(c('onicecandidate() | normalizing ICE candidates syntax (remove "a=" and "\\r\\n")'),p.normalizeCandidate=!0)),p.normalizeCandidate&&(o.candidate=t.candidate.replace(u.REGEXP_FIX_CANDIDATE,"")),c("onicecandidate() | m%d(%s) %s",o.sdpMLineIndex,o.sdpMid||"no mid",o.candidate),e.onicecandidate&&e.onicecandidate(n,o)}else c("onicecandidate() | end of candidates"),clearTimeout(e.timerGatheringTimeoutAfterRelay),delete e.timerGatheringTimeoutAfterRelay,e.onicecandidate&&e.onicecandidate(n,null)}},n.onaddstream=function(n){e.closed||(c("onaddstream() | stream:",n.stream),e.onaddstream&&e.onaddstream(n,n.stream))},n.onremovestream=function(n){e.closed||(c("onremovestream() | stream:",n.stream),e.onremovestream&&e.onremovestream(n,n.stream))},n.ondatachannel=function(n){e.closed||(c("ondatachannel()"),e.ondatachannel&&e.ondatachannel(n,n.channel))},n.onsignalingstatechange=function(t){n.signalingState!==e._signalingState&&(c("onsignalingstatechange() | signalingState: %s",n.signalingState),e._signalingState=n.signalingState,e.onsignalingstatechange&&e.onsignalingstatechange(t,n.signalingState))},n.oniceconnectionstatechange=function(t){n.iceConnectionState!==e._iceConnectionState&&(c("oniceconnectionstatechange() | iceConnectionState: %s",n.iceConnectionState),e._iceConnectionState=n.iceConnectionState,e.oniceconnectionstatechange&&e.oniceconnectionstatechange(t,n.iceConnectionState))},n.onicegatheringstatechange=function(t){e.closed||n.iceGatheringState!==e._iceGatheringState&&(c("onicegatheringstatechange() | iceGatheringState: %s",n.iceGatheringState),e._iceGatheringState=n.iceGatheringState,e.onicegatheringstatechange&&e.onicegatheringstatechange(t,n.iceGatheringState))},n.onidentityresult=function(n){e.closed||(c("onidentityresult()"),e.onidentityresult&&e.onidentityresult(n))},n.onpeeridentity=function(n){e.closed||(c("onpeeridentity()"),e.onpeeridentity&&e.onpeeridentity(n))},n.onidpassertionerror=function(n){e.closed||(c("onidpassertionerror()"),e.onidpassertionerror&&e.onidpassertionerror(n))},n.onidpvalidationerror=function(n){e.closed||(c("onidpvalidationerror()"),e.onidpvalidationerror&&e.onidpvalidationerror(n))}}function a(){var e=this.pc,n=this.options,t=null;return e.localDescription?(n.iceTransportsRelay?t=e.localDescription.sdp.replace(u.REGEXP_SDP_NON_RELAY_CANDIDATES,""):n.iceTransportsNone&&(t=e.localDescription.sdp.replace(u.REGEXP_SDP_CANDIDATES,"")),this._localDescription=new l.RTCSessionDescription({type:e.localDescription.type,sdp:t||e.localDescription.sdp}),this._localDescription):(this._localDescription=null,null)}n.exports=t;var s=e("merge"),c=e("debug")("rtcninja:Connection"),d=e("debug")("rtcninja:ERROR:Connection");d.log=console.warn.bind(console);var l=e("./Adapter"),u={REGEXP_NORMALIZED_CANDIDATE:new RegExp(/^candidate:/i),REGEXP_FIX_CANDIDATE:new RegExp(/(^a=|\r|\n)/gi),REGEXP_RELAY_CANDIDATE:new RegExp(/ relay /i),REGEXP_SDP_CANDIDATES:new RegExp(/^a=candidate:.*\r\n/gim),REGEXP_SDP_NON_RELAY_CANDIDATES:new RegExp(/^a=candidate:(.(?! relay ))*\r\n/gim)},p={normalizeCandidate:null};t.prototype.createOffer=function(e,n,t){c("createOffer()");var i=this;this.pc.createOffer(function(n){i.closed||(c("createOffer() | success"),e&&e(n))},function(e){i.closed||(d("createOffer() | error:",e),n&&n(e))},t)},t.prototype.createAnswer=function(e,n,t){c("createAnswer()");var i=this;this.pc.createAnswer(function(n){i.closed||(c("createAnswer() | success"),e&&e(n))},function(e){i.closed||(d("createAnswer() | error:",e),n&&n(e))},t)},t.prototype.setLocalDescription=function(e,n,t){c("setLocalDescription()");var i=this;this.pc.setLocalDescription(e,function(){i.closed||(c("setLocalDescription() | success"),n&&n())},function(e){i.closed||(d("setLocalDescription() | error:",e),t&&t(e))}),this.ignoreIceGathering=!1},t.prototype.setRemoteDescription=function(e,n,t){c("setRemoteDescription()");var i=this;this.pc.setRemoteDescription(e,function(){i.closed||(c("setRemoteDescription() | success"),n&&n())},function(e){i.closed||(d("setRemoteDescription() | error:",e),t&&t(e))})},t.prototype.updateIce=function(e){c("updateIce() | configuration:",e),i.call(this,e),this.pc.updateIce(this.configuration),this.ignoreIceGathering=!1},t.prototype.addIceCandidate=function(e,n,t){c("addIceCandidate() | candidate:",e);var i=this;this.pc.addIceCandidate(e,function(){i.closed||(c("addIceCandidate() | success"),n&&n())},function(e){i.closed||(d("addIceCandidate() | error:",e),t&&t(e))})},t.prototype.getConfiguration=function(){return c("getConfiguration()"),this.pc.getConfiguration()},t.prototype.getLocalStreams=function(){return c("getLocalStreams()"),this.pc.getLocalStreams()},t.prototype.getRemoteStreams=function(){return c("getRemoteStreams()"),this.pc.getRemoteStreams()},t.getStreamById=function(e){c("getStreamById() | streamId:",e),this.pc.getStreamById(e)},t.prototype.addStream=function(e){c("addStream() | stream:",e),this.pc.addStream(e)},t.prototype.removeStream=function(e){c("removeStream() | stream:",e),this.pc.removeStream(e)},t.prototype.close=function(){c("close()"),this.closed=!0,clearTimeout(this.timerGatheringTimeoutAfterRelay),delete this.timerGatheringTimeoutAfterRelay,this.pc.close()},t.prototype.createDataChannel=function(){return c("createDataChannel()"),this.pc.createDataChannel.apply(this.pc,arguments)},t.prototype.createDTMFSender=function(e){return c("createDTMFSender()"),this.pc.createDTMFSender(e)},t.prototype.getStats=function(){return c("getStats()"),this.pc.getStats.apply(this.pc,arguments)},t.prototype.setIdentityProvider=function(){return c("setIdentityProvider()"),this.pc.setIdentityProvider.apply(this.pc,arguments)},t.prototype.getIdentityAssertion=function(){return c("getIdentityAssertion()"),this.pc.getIdentityAssertion()}},{"./Adapter":1,debug:7,merge:11}],3:[function(e,n){(function(t){function i(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,t)}function o(){for(;I!==R.READY;);}function r(){if(p("injectPlugin()"),I=R.INJECTING,l.msie&&10>=b){var e=document.createDocumentFragment();for(C=document.createElement("div"),C.innerHTML='<object id="'+S.pluginId+'" type="'+S.type+'" width="1" height="1"><param name="pluginId" value="'+S.pluginId+'" /><param name="windowless" value="false" /><param name="pageId" value="'+w+'" /><param name="onload" value="'+S.onload+'" />'+(T.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+"</object>";C.firstChild;)e.appendChild(C.firstChild);document.body.appendChild(e),C=document.getElementById(S.pluginId)}else C=document.createElement("object"),C.id=S.pluginId,C.width="1px",C.height="1px",C.type=S.type,C.innerHTML='<param name="pluginId" value="'+S.pluginId+'"><param name="windowless" value="false" /> '+(T.getAllCams?'<param name="forceGetAllCams" value="True" />':"")+'<param name="pageId" value="'+w+'">',C.addEventListener("DOMContentLoadedonload",S.onload,!1),document.body.appendChild(C);I=R.INJECTED}function a(){if(!l.msie&&navigator.plugins){for(var e=navigator.plugins,n=0,i=e.length;i>n;n++)if(e[n].name.indexOf(S.plugName)>=0)return p("isPluginInstalled() | yes"),!0;return p("isPluginInstalled() | no"),!1}try{{new t.ActiveXObject(S.prefix+"."+S.plugName)}return p("isPluginInstalled() | yes"),!0}catch(o){return p("isPluginInstalled() | no"),!1}}function s(){p("defineWebRTCInterface()"),I=R.INITIALIZING,f=function(e,n,t){o(),C.getUserMedia(e,n,t)},m=function(e,n){for(var t=e.iceServers,i=0,r=t.length;r>i;i++)t[i].hasCredentials=t[i].hasOwnProperty("username")&&t[i].hasOwnProperty("credential");var a=n&&n.mandatory?n.mandatory:null,s=n&&n.optional?n.optional:null;return o(),C.PeerConnection(w,t,a,s)},g=function(e){return o(),C.ConstructSessionDescription(e.type,e.sdp)},h=function(e){return o(),C.ConstructIceCandidate(e.sdpMid||"",e.sdpMLineIndex,e.candidate)},y=function(){},y.getSources=function(e){o(),C.GetSources(e)},v=function(e,n){if(n.enableSoundTracks(!0),"audio"!==e.nodeName.toLowerCase()){var t=0===e.id.length?Math.random().toString(36).slice(2):e.id;if(e.isWebRTCPlugin&&e.isWebRTCPlugin()){for(var o=e.children,r=0,a=o.length;r!==a;r++)if("streamId"===o[r].name){o[r].value=n.id;break}e.setStreamId(n.id)}else{var s=document.createDocumentFragment(),c=document.createElement("div"),d=e.className?'class="'+e.className+'" ':"",u=e.getBoundingClientRect();for(c.innerHTML='<object id="'+t+'" '+d+'type="'+S.type+'"><param name="pluginId" value="'+t+'" /> <param name="pageId" value="'+w+'" /> <param name="windowless" value="true" /> <param name="streamId" value="'+n.id+'" /> </object>';c.firstChild;)s.appendChild(c.firstChild);e.parentNode.insertBefore(s,e),s=document.getElementById(t),s.width=u.width+"px",s.height=u.height+"px",e.parentNode.removeChild(e)}var p=document.getElementById(t);return p.onplaying=e.onplaying?e.onplaying:function(){},l.msie&&(i(p,"playing",p.onplaying),p.onclick=e.onclick?e.onclick:function(){},p._TemOnClick=function(e){p.onclick({srcElement:document.getElementById(e)})}),p}return e},u(function(){r()})}function c(){p("pluginNeededButNotInstalled()"),T.hidePluginInstallPrompt||u(function(){var e;e=S.portalLink?'This website requires you to install the <a href="'+S.portalLink+'" target="_blank">'+S.companyName+" WebRTC Plugin</a> to work on this browser.":"This website requires you to install a WebRTC-enabling plugin to work on this browser.",d(e,"Install Now",S.downloadLink)})}function d(e){t.alert(e)}var l=e("bowser").browser,u=e("domready"),p=e("debug")("rtcninja:TemasysPlugin"),f=null,m=null,g=null,h=null,y=null,v=null,b=Number(l.version)||0,C=null,T={getAllCams:!1,hidePluginInstallPrompt:!1},S={prefix:"Tem",plugName:"TemWebRTCPlugin",pluginId:"plugin0",type:"application/x-temwebrtcplugin",onload:"__TemWebRTCReady0",portalLink:"http://temasys.atlassian.net/wiki/display/TWPP/WebRTC+Plugins",downloadLink:null,companyName:"Temasys"};navigator.platform.match(/^Mac/i)?S.downloadLink="http://bit.ly/1n77hco":navigator.platform.match(/^Win/i)&&(S.downloadLink="http://bit.ly/1kkS4FN");var w=Math.random().toString(36).slice(2),R={NONE:0,INITIALIZING:1,INJECTING:2,INJECTED:3,READY:4},I=R.NONE;t.__TemWebRTCReady0=function(){p("__TemWebRTCReady0()"),arguments.callee.StaticWasInit=arguments.callee.StaticWasInit||1,1===arguments.callee.StaticWasInit&&u(function(){I=R.READY}),arguments.callee.StaticWasInit++};var A=n.exports=function(){var e=a();return e?s():c(),A.getUserMedia=f,A.RTCPeerConnection=m,A.RTCSessionDescription=g,A.RTCIceCandidate=h,A.MediaStreamTrack=y,A.attachMediaStream=v,e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bowser:6,debug:7,domready:10}],4:[function(e,n){var t=n.exports={},i=e("debug")("rtcninja"),o=e("./version");i("version %s",o);var r=e("./Adapter"),a=e("./Connection");Object.defineProperty(t,"version",{get:function(){return o}}),t.Connection=a,t.hasWebRTC=r.hasWebRTC,t.getUserMedia=r.getUserMedia,t.RTCPeerConnection=r.RTCPeerConnection,t.RTCSessionDescription=r.RTCSessionDescription,t.RTCIceCandidate=r.RTCIceCandidate,t.MediaStreamTrack=r.MediaStreamTrack,t.attachMediaStream=r.attachMediaStream,t.closeMediaStream=r.closeMediaStream,t.debug=e("debug")},{"./Adapter":1,"./Connection":2,"./version":5,debug:7}],5:[function(e,n){n.exports="0.1.1"},{}],6:[function(n,t){!function(n,i){"undefined"!=typeof t&&t.exports?t.exports.browser=i():"function"==typeof e&&e.amd?e(i):this[n]=i()}("bowser",function(){function e(e){function t(n){var t=e.match(n);return t&&t.length>1&&t[1]||""}var i,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(e),a=!r&&/android/i.test(e),s=t(/version\/(\d+(\.\d+)?)/i),c=/tablet/i.test(e),d=!c&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?i={name:"Opera",opera:n,version:s||t(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?i={name:"Windows Phone",windowsphone:n,msie:n,version:t(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:n,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:n,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},s&&(i.version=s)):/sailfish/i.test(e)?i={name:"Sailfish",sailfish:n,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:n,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(i={name:"Firefox",firefox:n,version:t(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=n)):/silk/i.test(e)?i={name:"Amazon Silk",silk:n,version:t(/silk\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:s}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:n,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:n,version:s||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(i={name:"WebOS",webos:n,version:s||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=n)):i=/bada/i.test(e)?{name:"Bada",bada:n,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:n,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||s}:/safari/i.test(e)?{name:"Safari",safari:n,version:s}:{},/(apple)?webkit/i.test(e)?(i.name=i.name||"Webkit",i.webkit=n,!i.version&&s&&(i.version=s)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=n,i.version=i.version||t(/gecko\/(\d+(\.\d+)?)/i)),a||i.silk?i.android=n:o&&(i[o]=n,i.ios=n);var l="";o?(l=t(/os (\d+([_\s]\d+)*) like mac os x/i),l=l.replace(/[_\s]/g,".")):a?l=t(/android[ \/-](\d+(\.\d+)*)/i):i.windowsphone?l=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.webos?l=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?l=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?l=t(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(l=t(/tizen[\/\s](\d+(\.\d+)*)/i)),l&&(i.osversion=l);var u=l.split(".")[0];return c||"ipad"==o||a&&(3==u||4==u&&!d)||i.silk?i.tablet=n:(d||"iphone"==o||"ipod"==o||a||i.blackberry||i.webos||i.bada)&&(i.mobile=n),i.msie&&i.version>=10||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1?i.a=n:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6?i.c=n:i.x=n,i}var n=!0,t=e("undefined"!=typeof navigator?navigator.userAgent:"");return t._detect=e,t})},{}],7:[function(e,n,t){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,r=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,i),e}function r(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?c.removeItem("debug"):c.debug=e}catch(n){}}function s(){var e;try{e=c.debug}catch(n){}return e}t=n.exports=e("./debug"),t.log=r,t.formatArgs=o,t.save=a,t.load=s,t.useColors=i;var c;c="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:window.localStorage,t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())},{"./debug":8}],8:[function(e,n,t){function i(){return t.colors[l++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,r=n-(d||n);e.diff=r,e.prev=d,e.curr=n,d=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=i());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;s++;var o=t.formatters[i];if("function"==typeof o){var r=a[s];n=o.call(e,r),a.splice(s,1),s--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var c=o.log||t.log||console.log.bind(console);c.apply(e,a)}n.enabled=!1,o.enabled=!0;var r=t.enabled(e)?o:n;return r.namespace=e,r}function r(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),i=n.length,o=0;i>o;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,i;for(n=0,i=t.skips.length;i>n;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;i>n;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=n.exports=o,t.coerce=c,t.disable=a,t.enable=r,t.enabled=s,t.humanize=e("ms"),t.names=[],t.skips=[],t.formatters={};var d,l=0},{ms:9}],9:[function(e,n){function t(e){var n=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(n){var t=parseFloat(n[1]),i=(n[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return t*l;case"days":case"day":case"d":return t*d;case"hours":case"hour":case"h":return t*c;case"minutes":case"minute":case"m":return t*s;case"seconds":case"second":case"s":return t*a;case"ms":return t}}}function i(e){return e>=d?Math.round(e/d)+"d":e>=c?Math.round(e/c)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return r(e,d,"day")||r(e,c,"hour")||r(e,s,"minute")||r(e,a,"second")||e+" ms"}function r(e,n,t){return n>e?void 0:1.5*n>e?Math.floor(e/n)+" "+t:Math.ceil(e/n)+" "+t+"s"}var a=1e3,s=60*a,c=60*s,d=24*c,l=365.25*d;n.exports=function(e,n){return n=n||{},"string"==typeof e?t(e):n.long?o(e):i(e)}},{}],10:[function(n,t){!function(n,i){"undefined"!=typeof t?t.exports=i():"function"==typeof e&&"object"==typeof e.amd?e(i):this[n]=i()}("domready",function(){var e,n=[],t=document,i=t.documentElement.doScroll,o="DOMContentLoaded",r=(i?/^loaded|^c/:/^loaded|^i|^c/).test(t.readyState);return r||t.addEventListener(o,e=function(){for(t.removeEventListener(o,e),r=1;e=n.shift();)e()}),function(e){r?e():n.push(e)}})},{}],11:[function(e,n){!function(e){function t(e,n){if("object"!==o(e))return n;for(var i in n)e[i]="object"===o(e[i])&&"object"===o(n[i])?t(e[i],n[i]):n[i];return e}function i(e,n,i){var a=i[0],s=i.length;(e||"object"!==o(a))&&(a={});for(var c=0;s>c;++c){var d=i[c],l=o(d);if("object"===l)for(var u in d){var p=e?r.clone(d[u]):d[u];a[u]=n?t(a[u],p):p}}return a}function o(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var r=function(e){return i(e===!0,!1,arguments)},a="merge";r.recursive=function(e){return i(e===!0,!0,arguments)},r.clone=function(e){var n,t,i=e,a=o(e);if("array"===a)for(i=[],t=e.length,n=0;t>n;++n)i[n]=r.clone(e[n]);else if("object"===a){i={};for(n in e)i[n]=r.clone(e[n])}return i},e?n.exports=r:window[a]=r}("object"==typeof n&&n&&"object"==typeof n.exports&&n.exports)},{}]},{},[4])(4)});